<header *ngIf="allowedActions.add || allowedActions.sort"
        class="bel-header">
  <b-button *ngIf="allowedActions.add"
            [type]="buttonType.secondary"
            [size]="buttonSize.small"
            [icon]="icons.add"
            [text]="allowedActions.add!==true ? allowedActions.add : translation.add"
            [disabled]="!!editingItem || !!deletingItem"
            (clicked)="addItem()">
  </b-button>

  <b-button *ngIf="allowedActions.sort"
            class="bel-reset-button"
            [type]="buttonType.tertiary"
            [size]="buttonSize.small"
            [icon]="listIsAscending === undefined || listIsAscending === true ? icons.sort_asc : icons.sort_desc"
            [ngClass]="{'custom-sorting':listIsAscending === undefined}"
            [disabled]="!!editingItem || !!deletingItem"
            (clicked)="sortList()"
            [text]="listIsAscending === undefined
              ? translation.sortCustom :
                listIsAscending === true ?
                  translation.sortAsc : translation.sortDesc">
  </b-button>

</header>

<smooth-dnd-container role="list"
                      [orientation]="'vertical'"
                      [lockAxis]="'y'"
                      [dragClass]="'bel-item-dragged'"
                      [dropClass]="'bel-item-dropped'"
                      [nonDragAreaSelector]="'.bel-item-input.edit-mode, .bel-item-menu'"
                      (drop)="onItemMove($event)">

  <smooth-dnd-draggable *ngFor="let item of listViewModel; trackBy: listTrackBy" role="listitem">

    <div class="bel-item b-icon-drag-alt b-icon-medium b-icon-dark"
         [ngClass]="{
           'focused': item.focused,
           'bel-item-new': item.new
         }">

      <input #itemEditInput
             type="text"
             class="bfe-input bel-item-input"
             [ngClass]="{'edit-mode': !item.readonly}"
             [value]="item.value"
             [readonly]="item.readonly"
             autocomplete="off"
             [attr.data-item-id]="item.id">

      <b-menu *ngIf="item.menu"
              [hidden]="item.showRemoveConfirm"
              [menu]="item.menu"
              class="bel-item-menu">
        <b-square-button menu-trigger
                         [type]="buttonType.tertiary"
                         [size]="buttonSize.small"
                         [icon]="icons.three_dots_vert">
        </b-square-button>
      </b-menu>

      <div *ngIf="item.showRemoveConfirm"
           class="bel-item-confirm">
        <b-button  class="bel-cancel-button"
                  [type]="buttonType.tertiary"
                  [size]="buttonSize.small"
                  [text]="translation.cancel">
        </b-button>
        <b-button class="bel-remove-button"
                  [type]="buttonType.negative"
                  [size]="buttonSize.small"
                  [text]="translation.remove"
                  [attr.data-item-id]="item.id">
        </b-button>
      </div>

    </div>

  </smooth-dnd-draggable>
</smooth-dnd-container>
