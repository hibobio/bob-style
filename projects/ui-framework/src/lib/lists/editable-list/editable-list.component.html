<header *ngIf="allowedActions.add || allowedActions.sort"
        class="bel-header">

  <b-button *ngIf="allowedActions.add"
            [type]="buttonType.secondary"
            [size]="buttonSize.small"
            [icon]="icons.add"
            [text]="allowedActions.add!==true ? allowedActions.add : translation.add"
            (clicked)="addItem()">
  </b-button>

  <b-button *ngIf="allowedActions.sort"
            class="bel-sort-button"
            [type]="buttonType.tertiary"
            [size]="buttonSize.small"
            [icon]="listState.sortType === order.UserDefined || listState.sortType === order.Asc ? icons.sort_asc :
            icons.sort_desc"
            [ngClass]="{'custom-sorting': listState.sortType === order.UserDefined}"
            (clicked)="sortList()"
            [text]="listState.sortType === order.Asc
              ? translation.sortAsc :
                listState.sortType === order.Desc ?
                translation.sortDesc :
                translation.sortCustom">
  </b-button>

</header>

<smooth-dnd-container role="list"
                      [ngClass]="{'bel-has-item-dragged': isDragged}"
                      [orientation]="'vertical'"
                      [lockAxis]="'y'"
                      [dragClass]="'bel-item-dragged'"
                      [dropClass]="'bel-item-dropped'"
                      [nonDragAreaSelector]="'.bel-remove-button'"
                      (dragStart)="onDragStart()"
                      (drop)="onDrop($event)">

  <smooth-dnd-draggable *ngFor="let item of listState.list; let index = index; trackBy: listTrackBy"
                        role="listitem">

    <div class="bel-item b-icon-drag-alt b-icon-medium b-icon-dark"
         [attr.data-item-id]="item.id">

      <span class="bel-item-value"
            data-max-lines="2">
        {{ item.value }}
      </span>

      <b-square-button *ngIf="allowedActions.remove && removingIndex !== index"
                       class="bel-remove-button"
                       [type]="buttonType.tertiary"
                       [size]="buttonSize.small"
                       [icon]="icons.delete"
                       (clicked)="removeItem(index)">
      </b-square-button>

      <div *ngIf="removingIndex === index"
           class="bel-item-confirm">
        <b-button class="bel-cancel-button"
                  [type]="buttonType.tertiary"
                  [size]="buttonSize.small"
                  [text]="translation.cancel"
                  (clicked)="removingIndex = null">
        </b-button>
        <b-button class="bel-remove-button"
                  [type]="buttonType.negative"
                  [size]="buttonSize.small"
                  [text]="translation.remove"
                  (clicked)="removeItem(index,true)">
        </b-button>
      </div>

    </div>

  </smooth-dnd-draggable>
</smooth-dnd-container>
