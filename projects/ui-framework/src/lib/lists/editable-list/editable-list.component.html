<header *ngIf="allowedActions.add || allowedActions.sort"
        class="bel-header">
  <b-button *ngIf="allowedActions.add"
            [type]="buttonType.secondary"
            [size]="buttonSize.small"
            [icon]="icons.add"
            [text]="allowedActions.add!==true ? allowedActions.add : 'Add'"
            [disabled]="editingNewItem"
            (clicked)="addItem()">
  </b-button>

  <b-button *ngIf="allowedActions.sort"
            class="bel-reset-button"
            [type]="buttonType.tertiary"
            [size]="buttonSize.small"
            [icon]="listIsAscending === undefined || listIsAscending === true ? icons.sort_asc : icons.sort_desc"
            [ngClass]="{'custom-sorting':listIsAscending === undefined}"
            (clicked)="sortList()">
    {{listIsAscending === undefined
      ? 'Custom' :
        listIsAscending === true ?
          'A - Z' : 'Z - A'}}
  </b-button>

</header>

<smooth-dnd-container role="list"
                      [orientation]="'vertical'"
                      [lockAxis]="'y'"
                      [dragClass]="'bel-item-dragged'"
                      [dropClass]="'bel-item-dropped'"
                      [nonDragAreaSelector]="'.bel-item-input.edit-mode, .bel-item-menu'"
                      (drop)="onDrop($event)">

  <smooth-dnd-draggable *ngFor="let item of listViewModel; trackBy: listTrackBy"
                        role="listitem">

    <div class="bel-item b-icon-drag-alt b-icon-medium b-icon-dark"
         [ngClass]="{
           'focused': item.focused,
           'bel-item-new': item.new,
           'bel-item-deleted': item.deleted
         }"
         [attr.data-item-id]="item.id">

      <input #itemEditInputs
             type="text"
             class="bfe-input bel-item-input"
             [ngClass]="{'edit-mode': !item.readonly}"
             [value]="item.value"
             [readonly]="item.readonly"
             autocomplete="off"
             [attr.data-item-id]="item.id">

      <b-menu *ngIf="item.menu"
              [hidden]="item.showRemoveConfirm"
              [menu]="item.menu"
              class="bel-item-menu">
        <b-square-button menu-trigger
                         [type]="buttonType.tertiary"
                         [size]="buttonSize.small"
                         [icon]="icons.three_dots_vert">
        </b-square-button>
      </b-menu>

      <div *ngIf="item.showRemoveConfirm"
           class="bel-item-confirm">
        <b-button *ngIf="allowedActions.sort"
                  class="bel-cancel-button"
                  [type]="buttonType.tertiary"
                  [size]="buttonSize.small"
                  (clicked)="removeItem(item.id, false)">
          Cancel
        </b-button>
        <b-button *ngIf="allowedActions.sort"
                  class="bel-remove-button"
                  [type]="buttonType.negative"
                  [size]="buttonSize.small"
                  (clicked)="removeItem(item.id, true)">
          Remove
        </b-button>
      </div>

    </div>

  </smooth-dnd-draggable>
</smooth-dnd-container>
