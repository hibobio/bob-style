<section class="bcp-section"
         [attr.aria-disabled]="disabled || null"
         [ngClass]="{
          'bcp-section-collapsible': collapsible,
          'bcp-section-expanded': collapsible && expanded,
          'bcp-section-not-divided': !divided
         }">

  <header class="
         bcp-header"
          [attr.id]="panelID+'-header'"
          [attr.aria-controls]="(collapsible && panelID) || null"
          [attr.aria-expanded]="(collapsible && expanded) || null"
          [ngClass]="{
            'b-icon-chevron-right': collapsible && !expanded,
            'b-icon-chevron-down': collapsible && expanded
          }"
          (click.outside-zone)="togglePanel()">

    <div *ngIf="title"
         class="bcp-title-wrap"
         [ngClass]="{'bcp-title-wrap-column': options?.titlesAsColumn}">

      <h4 class="bcp-title"
          [ngClass]="{'b-display-3': !options?.smallTitle, 'b-bold-body': options?.smallTitle}"
          [ngStyle]="{'color': titleColor}">{{title}}</h4>

      <p *ngIf="description"
         class="bcp-description">{{description}}</p>
    </div>

    <div *ngIf="hasHeaderContent"
         #headerContent
         class="bcp-header-content"
         [ngClass]="{'bcp-header-content-clickable': !options.headerTranscludeStopPropagation}"
         (click.outside-zone)="options.headerTranscludeStopPropagation && $event.stopPropagation()">
      <ng-content select="[header]"></ng-content>
    </div>

  </header>

  <div class="bcp-panel"
       *ngIf="!collapsible || expanded || (collapsible && contentLoaded)"
       [ngClass]="{
         'bcp-panel-collapsed': collapsible && !expanded,
         'bcp-panel-expanded': collapsible && expanded,
         'bcp-panel-starts-expanded': startsExpanded
       }"
       [attr.id]="panelID"
       [attr.aria-labelledby]="panelID+'-header'">
    <div class="bcp-panel-content-wrap"
         #panelContent>
      <ng-content></ng-content>
    </div>
  </div>

</section>
