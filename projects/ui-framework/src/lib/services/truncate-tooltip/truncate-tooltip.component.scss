@import '../../style/colors';
@import '../../style/typography';

@import '../../overlay/overlay';

:host {
  display: block;

  ::ng-deep {
    :only-child,
    p,
    div {
      border: 0;
      padding: 0;
      margin: 0;
    }
  }

  &:not(.btt-initialized) {
    max-height: 1em;
    opacity: 0;
  }
}

.btt {
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  --btt-font-size: 1em;
  --btt-line-height: 1.3;
  --btt-bg-color: white;

  &-truncate {
    white-space: nowrap;

    ::ng-deep {
      * {
        display: inline;
      }
    }
  }

  &-line-clamp {
    position: relative;

    &:after {
      content: '';
      text-align: right;
      position: absolute;
      bottom: 0;
      right: 0;
      width: 50%;
      height: calc(var(--btt-font-size) * var(--btt-line-height));
      background: linear-gradient(to right, white(0), var(--btt-bg-color) 80%);
    }

    @supports (-webkit-line-clamp: 2) {
      display: -webkit-box;
      -webkit-box-orient: vertical;

      &:after {
        display: none;
      }
    }
  }
}

::ng-deep {
  .mat-tooltip.b-truncate-tooltip {
    @include OverlayPanel;
    @include OverlayPointerHolders;
    @include OverlayPositionBounding(center);
    max-width: 300px;
    padding: 12px 15px;
    margin: 0;
    font-size: $font-size-body;
    color: $body-text-color;

    // position above
    &[style*='center bottom'],
    &[style*='50% 100% 0px'] {
      @include OverlayPositionBounding(above);
      &:before {
        bottom: -6px;
      }
      &:after {
        bottom: -5px;
      }
    }

    // position below
    &[style*='center top'],
    &[style*='50% 0% 0px'] {
      @include OverlayPositionBounding(below);
      &:before {
        top: -6px;
      }
      &:after {
        top: -5px;
      }
    }
  }
}
