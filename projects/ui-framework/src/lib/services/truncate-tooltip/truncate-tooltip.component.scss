$maxMaxLines: 5;

:host {
  display: block;

  ::ng-deep {
    :only-child,
    p,
    div {
      border: 0;
      padding: 0;
      margin: 0;
    }
  }
}

.btt {
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;

  &:not(.initialized) {
    max-height: 1em;
    opacity: 0;
  }
}

[data-max-lines='1'] {
  white-space: nowrap;

  ::ng-deep {
    * {
      display: inline;
    }
  }
}

$selector: '';
@for $lines from 2 through $maxMaxLines {
  @if $selector != '' {
    $selector: $selector + ',';
  }
  $selector: $selector + '[data-max-lines="' + $lines + '"]';
}

#{$selector} {
  mask-image: linear-gradient(
      to right,
      white 0%,
      white 50%,
      rgba(255, 255, 255, 0) 80%
    ),
    linear-gradient(white, white);
  mask-size: 100% calc(var(--font-size) * var(--line-height)),
    100% calc(100% - var(--font-size) * var(--line-height));
  mask-position: center bottom, center top;
  mask-repeat: no-repeat;

  @supports (-webkit-line-clamp: 2) {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    mask-image: none;
  }
}

@supports (-webkit-line-clamp: 2) {
  @for $lines from 2 through $maxMaxLines {
    [data-max-lines='#{$lines}'] {
      max-height: unquote(
        'calc(var(--font-size) * var(--line-height) * #{$lines})'
      );
      line-clamp: $lines;
      -webkit-line-clamp: $lines;
    }
  }
}
