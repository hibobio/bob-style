<label *ngIf="label"
       class="bfe-label"
       [attr.for]="id">{{label}}</label>

<div class="bfe-wrap"
     matAutocompleteOrigin
     #wrapper="matAutocompleteOrigin"
     [ngClass]="{focused: inputFocused, 'autocomplete-open': auto.isOpen,'empty': value.length === 0}"
     (click)="bInput.focus();">

  <b-chip #chipList
          *ngFor="let chip of value"
          [type]="chipType.tag"
          [removable]="removable"
          (removed)="remove(chip)">
    {{chip}}
  </b-chip>

  <input #bInput
         class="bfe-input"
         [attr.id]="id"
         [attr.name]="id"
         [type]="inputTypes.text"
         [attr.placeholder]="value.length === 0 && placeholder ? placeholder: null"
         [disabled]="disabled"
         [required]="required"
         [matAutocomplete]="auto"
         [matAutocompleteConnectedTo]="wrapper"
         (focus)="inputFocused = true"
         (blur)="inputFocused = false"
         (input)="onInput($event)"
         (keyup)="onInputKeydown($event)">

</div>

<mat-autocomplete #auto="matAutocomplete"
                  (optionSelected)="optionSelected($event)"
                  [class]="'chip-input-autocomplete'"
                  disableRipple="true">
  <mat-option *ngFor="let chip of filteredChips"
              [value]="chip">
    {{chip}}
  </mat-option>
</mat-autocomplete>

<p b-input-message
   *ngIf="hintMessage || warnMessage || errorMessage"
   [hintMessage]="hintMessage"
   [warnMessage]="warnMessage"
   [errorMessage]="errorMessage"
   [disabled]="disabled"></p>
