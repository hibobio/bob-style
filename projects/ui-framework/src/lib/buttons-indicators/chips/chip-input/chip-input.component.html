<label *ngIf="label"
       class="bfe-label"
       [attr.for]="bInput.id">{{label}}</label>

<div class="bfe-wrap"
     [ngClass]="{focused: inputFocused, 'autocomplete-open': auto.isOpen,'empty': value.length === 0}"
     (click)="bInput.focus();">

  <mat-chip-list #chipList
                 selectable="false">

    <mat-basic-chip *ngFor="let chip of value"
                    selectable="false"
                    removable="false"
                    disableRipple="true">
      <b-chip [type]="chipType.tag"
              [removable]="removable"
              (removed)="remove(chip)">
        {{chip}}
      </b-chip>
    </mat-basic-chip>

    <input #bInput
           class="bfe-input"
           [attr.name]="bInput.id"
           [type]="inputTypes.text"
           [placeholder]="value.length === 0 && placeholder"
           [attr.value]="value"
           [disabled]="disabled"
           [required]="required"
           [formControl]="chipInputControl"
           [matAutocomplete]="auto"
           [matChipInputFor]="chipList"
           [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
           [matChipInputAddOnBlur]="addOnBlur"
           (matChipInputTokenEnd)="add($event)"
           (focus)="inputFocused = true"
           (blur)="inputFocused = false"
           (keydown)="onInputKeydown($event)">
  </mat-chip-list>

  <mat-autocomplete #auto="matAutocomplete"
                    (optionSelected)="selected($event)"
                    [class]="'chip-input-autocomplete'"
                    disableRipple="true">
    <mat-option *ngFor="let chip of filteredChips | async"
                [value]="chip">
      {{chip}}
    </mat-option>
  </mat-autocomplete>

</div>


<p b-input-message
   *ngIf="hintMessage || warnMessage || errorMessage"
   [hintMessage]="hintMessage"
   [warnMessage]="warnMessage"
   [errorMessage]="errorMessage"
   [disabled]="disabled"></p>
