@import '../../style/colors';
@import '../../style/variables';
@import '../../style/mixins';
@import '../../style/typography';
@import './card.mixin';

@keyframes enablePointer {
  from {
    pointer-events: none;
  }
  to {
    pointer-events: all;
  }
}

@include card-common;

:host {
  &:hover,
  &:focus,
  &[data-focus-inside='true'] {
    .card-menu,
    .card-action {
      pointer-events: all;
      opacity: 1;
    }
  }

  &:hover,
  &:focus {
    .card-content {
      @include animate(enablePointer, 0s, 0.2s);
    }
  }
}

.card-menu,
.card-action {
  @include position(12px 10px null null);
  transition: opacity 0.2s;
  opacity: 0;
  pointer-events: none;
  z-index: 1;
}

.card-top {
  position: relative;
}

.card-top-with-image {
  margin: (-1 * $cardPadding) (-1 * $cardPadding) 0 (-1 * $cardPadding);
  padding: $cardPadding;
  background-size: cover;
  background-position: center;
  border-top-left-radius: $border-radius;
  border-top-right-radius: $border-radius;
  overflow: hidden;

  &:after {
    @include pseudo;
    @include position;
    @include size(100%, 60%);
    opacity: 0.8;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 1) 20%,
      rgba(0, 0, 0, 0) 100%
    );
    z-index: 0;
    clear: both;
  }
}

:host ::ng-deep {
  [card-top] {
    max-width: calc(100% - 22px);
    position: relative;
    z-index: 1;
  }
  .card-top.has-image [card-top] {
    color: white;
  }
}

.card-title,
.card-content {
  margin-top: times8(2);
}

.cta-button {
  margin-left: auto;
}

// Types

:host {
  &[data-type='small'],
  &[data-type='regular'] {
    .card-top-with-image {
      @include ratio(304/128, $clear: false);
      max-height: 140px;
    }
  }

  &[data-type='large'] {
    .card-top-with-image {
      @include ratio(304/160, $clear: false);
      max-height: 160px;
    }
  }
}
