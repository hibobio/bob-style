<label *ngIf="label && !hideLabelOnFocus"
       class="bfe-label"
       [attr.for]="id">{{label}}</label>

<div class="bfe-wrap has-suffix"
     #inputWrap
     [ngClass]="{focused: inputFocused[0]}">

  <input class="bfe-input"
         [readonly]="!allowKeyInput"
         maxlength="10"
         autocomplete="off"
         [attr.id]="id"
         [attr.name]="id"
         [type]="inputTypes.text"
         [attr.placeholder]="hideLabelOnFocus && label ? (!required ? label : label + '*') : placeholder"
         [value]="value"
         [disabled]="disabled"
         [required]="required"
         (click)="openPicker()"
         (focus)="onInputFocus()"
         (blur)="onInputBlur()"
         (keydown.outside-zone)="onInputKeydown($event)"
         (input.outside-zone)="onInputChange($event)"
         (dateChange)="transmit($event.value)"
         [matDatepicker]="picker"
         [min]="minDate || null"
         [max]="maxDate || null">

  <b-icon *ngIf="!isInputEmpty()"
          class="bfe-suffix clear-input"
          role="button"
          tabindex="0"
          [hasHoverState]="true"
          [icon]="icons.reset_x"
          [color]="inputFocused[0] ? iconColor.dark : iconColor.normal"
          [size]="iconSize.medium"
          (click)="clearInput()">
  </b-icon>

  <b-icon class="bfe-suffix open-picker"
          role="button"
          [hasHoverState]="true"
          [icon]="icons.calendar"
          [color]="inputFocused[0] ? iconColor.dark : iconColor.normal"
          [size]="iconSize.medium"
          (click)="openPicker()">
  </b-icon>

</div>

<mat-datepicker #picker
                [startView]="type === types.month ? 'year' : 'month'"
                [disabled]="disabled"
                [touchUi]="isMobile"
                [panelClass]="'b-datepicker-panel ' + ' type-' + type + (panelClass ? ' ' + panelClass : '')"
                (opened)="onPickerOpen()"
                (closed)="onPickerClose()"
                (monthSelected)="onPickerMonthSelect($event)">
</mat-datepicker>

<p b-input-message
   *ngIf="hintMessage || warnMessage || errorMessage"
   [hintMessage]="hintMessage"
   [warnMessage]="warnMessage"
   [errorMessage]="errorMessage"
   [disabled]="disabled"></p>
