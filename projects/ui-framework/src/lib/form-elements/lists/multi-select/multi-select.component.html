<content (click)="blockSelectClick ? null : openPanel()"
         [ngClass]="{'disabled': disabled, 'panel-open': panelOpen}"
         cdkOverlayOrigin
         class="panel-trigger">

  <b-input #triggerInput
           [disabled]="disabled"
           [ngClass]="{'has-tooltip': showTriggerTooltip, 'has-clear-prefix': value.length > 0}"
           [errorMessage]="errorMessage"
           [hintMessage]="hintMessage"
           [label]="label"
           [required]="required"
           [matTooltip]="showTriggerTooltip ? triggerValue : null"
           [value]="triggerValue">

    <div *ngIf="value.length > 0"
         class="clear-selection"
         (click)="clearSelection()"
         input-prefix>
      <b-icon (mouseenter)="blockSelectClick=true"
              (mouseleave)="blockSelectClick=false"
              [color]="iconColor.normal"
              [icon]="resetIcon"
              [hasHoverState]="true"
              [size]="iconSize.medium"
              class="clear-button">
      </b-icon>
    </div>

    <div input-suffix>
            <span *ngIf="showTriggerTooltip"
                  class="trigger-tooltip"
                  matTooltipPosition="above">
          ({{value.length}})
        </span>

      <span class="select-chevron"></span>

    </div>

  </b-input>

</content>

<ng-template #templateRef>
  <div class="panel-position"
       [ngClass]="positionClassList">

    <b-multi-list (selectChange)="onSelect($event)"
                  [options]="options"
                  [value]="value"
                  [maxHeight]="listElHeight*6"
                  [showSingleGroupHeader]="showSingleGroupHeader">
    </b-multi-list>

    <div class="select-footer">
      <b-button (click)="cancelSelection()"
                class="cancel-button"
                size="{{buttonSize.small}}"
                type="{{buttonType.secondary}}">
        Cancel
      </b-button>
      <b-button (click)="notifySelectionIds()"
                class="apply-button"
                size="{{buttonSize.small}}"
                type="{{buttonType.primary}}">
        Apply
      </b-button>
    </div>

  </div>
</ng-template>
