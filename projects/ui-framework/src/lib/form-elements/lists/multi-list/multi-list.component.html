<b-search [hideLabelOnFocus]="true">
</b-search>

<div [ngStyle]="{height: listOptions.length * listElHeight + 'px', maxHeight: maxHeight + 'px'}"
     class="v-scroll-wrapper">

  <cdk-virtual-scroll-viewport class="v-scroll"
                               itemSize="44"
                               maxBufferPx="{{maxHeight*44}}" minBufferPx="5">

    <div class="headers">
      <div *ngFor="let header of listHeaders"
           class="headers-group">
        <div [ngClass]="{'collapsed': header.isCollapsed}"
             class="option-select header"
             fxLayout="row" fxLayoutAlign="space-between center">
          <span (click)="toggleGroupCollapse(header)"
                class="header-collapse-trigger">
          </span>
          <div fxLayout="row" fxLayoutAlign="start center">
            <mat-pseudo-checkbox (click)="headerSelect(header)"
                                 [state]="header.selected ? checkboxState.checked : checkboxState.unchecked"
                                 class="checkbox">
            </mat-pseudo-checkbox>
            <span>{{header.groupName}}</span>
          </div>
          <span class="chevron"></span>
        </div>
        <div [ngStyle]="{height: header.isCollapsed ? 0 : header.placeHolderSize + 'px'}" class="placeholder"></div>
      </div>
    </div>

    <div class="options">
      <div (click)="optionClick(option)"
           *cdkVirtualFor="let option of listOptions"
           [ngClass]="{'header-placeholder': option.isPlaceHolder, 'option': !option.isPlaceHolder}"
           class="option-select" fxLayout="row"
           fxLayoutAlign="start center">
        <mat-pseudo-checkbox [state]="option.selected ? checkboxState.checked : checkboxState.unchecked"
                             class="checkbox">
        </mat-pseudo-checkbox>
        <span>{{option.value}}</span>
      </div>
    </div>
  </cdk-virtual-scroll-viewport>

</div>
