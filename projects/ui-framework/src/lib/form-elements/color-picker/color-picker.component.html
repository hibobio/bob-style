<b-form-element-label *ngIf="label && !hideLabelOnFocus"
                      class="bfe-label"
                      [label]="label"
                      [description]="description"
                      [fieldId]="id">
</b-form-element-label>

<div cdkOverlayOrigin
     class="bfe-wrap has-prefix"
     [ngClass]="{
       focused: panelOpen,
       'panel-open': panelOpen,
       'panel-above': positionClassList['panel-above'],
       'panel-below': positionClassList['panel-below']
      }"
     (click)="openPanel()">

  <div class="blk bfe-prefix">
    <span class="color-circle"
          [style.background-color]="value || nullColor"
          [class.default-value]="!value"></span>
  </div>

  <input #input
         class="bfe-input"
         [attr.id]="id"
         [attr.name]="id"
         [type]="'text'"
         [attr.placeholder]="hideLabelOnFocus && label ? (!required ? label :
         label + '*') : placeholder"
         [value]="value"
         [attr.disabled]="disabled || readonly || null"
         [required]="required"
         [readonly]="readonly"
         [attr.maxlength]="7"
         (input)="onInputChange($event)">

  <span [hidden]="!value || readonly"
        class="bfe-suffix">
    <b-icon class="clear-input"
            role="button"
            [config]="resetIcon"
            (click)="$event.stopPropagation(); clearInput()">
    </b-icon>
  </span>
</div>

<p b-input-message
   *ngIf="hintMessage || warnMessage || errorMessage"
   [hintMessage]="hintMessage"
   [warnMessage]="warnMessage"
   [errorMessage]="errorMessage"
   [disabled]="disabled">
</p>

<ng-template #templateRef>
  <div class="b-select-panel color-picker-dropdown">
    <span [colorPicker]="value||nullColor"
          [cpFallbackColor]="nullColor"
          [cpToggle]="true"
          [cpDisableInput]="true"
          [cpWidth]="(colorPickerWidth||280)-2"
          [cpOutputFormat]="'hex'"
          [cpDialogDisplay]="'inline'"
          (colorPickerChange)="onColorPickerChange($event)"
          (colorPickerClose)="onColorPickerChange($event)"></span>
  </div>
</ng-template>
